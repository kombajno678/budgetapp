<div class="">
    <ng-container *ngIf="!compact">
        <h2>
            Summary

        </h2>


        <mat-button-toggle-group name="summaryType"
                                 class="w-100"
                                 #summaryTypeGroup="matButtonToggleGroup"
                                 aria-label="summaryType"
                                 (change)="onSummaryTypeChange($event)">
            <mat-button-toggle class="w-100"
                               value="year">year</mat-button-toggle>
            <mat-button-toggle class="w-100"
                               value="quarter">quarter</mat-button-toggle>
            <mat-button-toggle class="w-100"
                               value="month"
                               checked>month</mat-button-toggle>
            <mat-button-toggle class="w-100"
                               value="week">week</mat-button-toggle>
            <mat-button-toggle class="w-100"
                               value="day">day</mat-button-toggle>
        </mat-button-toggle-group>
    </ng-container>


    <mat-accordion class="example-headers-align mat-elevation-z0">

        <ng-container *ngFor="let g of groupedPredictions">

            <mat-expansion-panel class="mat-elevation-z0">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <div class="row m-0 p-0 w-100">
                            <div class="col-auto p-1">
                                {{g.name}}
                            </div>
                            <div class="col p-1 opacity-3">
                                expenses
                            </div>
                            <div class="col p-1 opacity-3">

                                <span class="{{ g.expensesSumMax ? 'badge-warn' : '' }} m-0 p-0">
                                    {{this.displayValue(g.expensesSum)}}
                                </span>

                            </div>
                            <div class="col p-1 opacity-3">
                                income

                            </div>
                            <div class="col p-1 opacity-3">
                                <span class="{{ g.incomeSumMax ? 'badge-primary' : '' }} m-0 p-0">
                                    {{this.displayValue(g.incomeSum)}}
                                </span>

                            </div>
                        </div>


                    </mat-panel-title>
                    <!--
                    <mat-panel-description>
                    </mat-panel-description>
                    -->
                </mat-expansion-panel-header>


                <ng-template matExpansionPanelContent>

                    <div class="p-2">



                        <mat-list role="list">


                            <mat-list-item>
                                <div matLine>
                                    expenses:
                                </div>
                                <span class="{{ g.expensesSumMax ? 'badge-warn' : '' }} m-0 p-0">
                                    {{this.displayValue(g.expensesSum)}}
                                </span>

                            </mat-list-item>


                            <mat-list-item role="listitem">
                                <div matLine>income:</div>
                                <span class="{{ g.incomeSumMax ? 'badge-primary' : '' }} m-0 p-0">
                                    {{this.displayValue(g.incomeSum)}}
                                </span>

                            </mat-list-item>

                            <mat-divider></mat-divider>


                            <mat-list-item role="listitem">
                                <div matLine>difference:</div>
                                <span class="">
                                    {{this.displayValue(g.expensesSum + g.incomeSum)}}
                                </span>

                            </mat-list-item>

                            <mat-divider></mat-divider>


                            <mat-list-item role="listitem">
                                <div matLine>balance:</div>
                                <span class="">
                                    {{this.displayValue(g.predictions[g.predictions.length-1].value)}}
                                </span>

                            </mat-list-item>


                            <mat-divider></mat-divider>


                            <mat-list-item role="listitem">
                                <div matLine>operations:</div>
                                <span class="">
                                    {{g.numberOfOperations}}
                                </span>

                            </mat-list-item>


                            <mat-list-item role="listitem">
                                <div matLine>from:</div>
                                <span class="">
                                    {{g.predictions[0].date.toLocaleDateString()}}
                                </span>

                            </mat-list-item>
                            <mat-list-item role="listitem">
                                <div matLine>to:</div>
                                <span class="">
                                    {{g.predictions[g.predictions.length-1].date.toLocaleDateString()}}
                                </span>

                            </mat-list-item>

                            <mat-list-item role="listitem">
                                <button mat-flat-button
                                        color="primary"
                                        (click)="redirectToOperations(g)">
                                    Go to operations
                                </button>

                            </mat-list-item>


                            <!--
                <mat-list dense>


                  <ng-container *ngFor="let op of g.operations; index as i; first as isFirst">
                    {{op.when.toLocaleDateString()}}
                    <app-operation-list-element [op]="op"
                                                [compact]="false"
                                                [displayButton]="false">
                      ...
                    </app-operation-list-element>
                  </ng-container>

                </mat-list>
                -->



                        </mat-list>






                    </div>
                </ng-template>

            </mat-expansion-panel>








        </ng-container>
    </mat-accordion>
</div>